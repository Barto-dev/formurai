(()=>{var Ue=Object.create;var w=Object.defineProperty;var We=Object.getOwnPropertyDescriptor;var $e=Object.getOwnPropertyNames;var ze=Object.getPrototypeOf,He=Object.prototype.hasOwnProperty;var Ye=(e,r,t)=>r in e?w(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t;var Qe=e=>w(e,"__esModule",{value:!0});var u=(e,r)=>()=>(r||e((r={exports:{}}).exports,r),r.exports);var Ze=(e,r,t)=>{if(r&&typeof r=="object"||typeof r=="function")for(let i of $e(r))!He.call(e,i)&&i!=="default"&&w(e,i,{get:()=>r[i],enumerable:!(t=We(r,i))||t.enumerable});return e},Ke=e=>Ze(Qe(w(e!=null?Ue(ze(e)):{},"default",e&&e.__esModule&&"default"in e?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e);var I=(e,r,t)=>(Ye(e,typeof r!="symbol"?r+"":r,t),t),v=(e,r,t)=>{if(!r.has(e))throw TypeError("Cannot "+t)};var n=(e,r,t)=>(v(e,r,"read from private field"),t?t.call(e):r.get(e)),p=(e,r,t)=>{if(r.has(e))throw TypeError("Cannot add the same private member more than once");r instanceof WeakSet?r.add(e):r.set(e,t)},m=(e,r,t,i)=>(v(e,r,"write to private field"),i?i.call(e,t):r.set(e,t),t);var o=u((Zt,rr)=>{rr.exports={isPrimitiveValue(e){return!!(typeof e=="string"||typeof e=="number"&&isFinite(e)||typeof e=="boolean")},looksLikeNumber(e){return!isNaN(+e)},isObject(e){return Object(e)===e&&Object.getPrototypeOf(e)===Object.prototype},isEmptyObject(e){for(let r in e)if(e.hasOwnProperty(r))return!1;return!0},escapeRegExp(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isNoValue(e){return e==null||e===""}}});var d=u((Kt,tr)=>{"use strict";var k=o(),D={},er=0,j=class{constructor(r,t){this.isPrepared=!1,this.livrRules=r,this.validators={},this.validatorBuilders={},this.errors=null,t!=null?this.isAutoTrim=t:this.isAutoTrim=er,this.registerRules(D)}static getDefaultRules(){return D}static registerAliasedDefaultRule(r){if(!r.name)throw"Alias name required";D[r.name]=this._buildAliasedRule(r.rules,r.error)}static registerDefaultRules(r){for(let t in r)D[t]=r[t]}static defaultAutoTrim(r){er=!!r}static _buildAliasedRule(r,t){if(!r)throw"Alias rules required";let i={value:r};return s=>{let a=new j(i).registerRules(s).prepare();return(l,f,c)=>{let h=a.validate({value:l});if(h){c.push(h.value);return}else return t||a.getErrors().value}}}prepare(){let r=this.livrRules;for(let t in r){let i=r[t];Array.isArray(i)||(i=[i]);let s=[];for(let a of i){let l=this._parseRule(a);s.push(this._buildValidator(l.name,l.args))}this.validators[t]=s}return this.isPrepared=!0,this}validate(r){if(this.isPrepared||this.prepare(),!k.isObject(r)){this.errors="FORMAT_ERROR";return}this.isAutoTrim&&(r=this._autoTrim(r));let t={},i={};for(let s in this.validators){let a=this.validators[s];if(!a||!a.length)continue;let l=r[s];for(let f of a){let c=[],h=f(i.hasOwnProperty(s)?i[s]:l,r,c);if(h){t[s]=h;break}else c.length?i[s]=c[0]:r.hasOwnProperty(s)&&!i.hasOwnProperty(s)&&(i[s]=l)}}return k.isEmptyObject(t)?(this.errors=null,i):(this.errors=t,!1)}getErrors(){return this.errors}registerRules(r){for(let t in r)this.validatorBuilders[t]=r[t];return this}registerAliasedRule(r){if(!r.name)throw"Alias name required";return this.validatorBuilders[r.name]=this.constructor._buildAliasedRule(r.rules,r.error),this}getRules(){return this.validatorBuilders}_parseRule(r){let t,i;return k.isObject(r)?(t=Object.keys(r)[0],i=r[t],Array.isArray(i)||(i=[i])):(t=r,i=[]),{name:t,args:i}}_buildValidator(r,t){if(!this.validatorBuilders[r])throw"Rule ["+r+"] not registered";let i=[];return i.push.apply(i,t),i.push(this.getRules()),this.validatorBuilders[r].apply(null,i)}_autoTrim(r){let t=typeof r;if(t!=="object"&&r)return r.replace?r.replace(/^\s*/,"").replace(/\s*$/,""):r;if(t=="object"&&Array.isArray(r)){let i=[];for(let s of r)i.push(this._autoTrim(s));return i}else if(t=="object"&&k.isObject(r)){let i={};for(let s in r)r.hasOwnProperty(s)&&(i[s]=this._autoTrim(r[s]));return i}return r}};tr.exports=j});var sr=u((Jt,ir)=>{var Je=o();function Xe(){return e=>{if(Je.isNoValue(e))return"REQUIRED"}}ir.exports=Xe});var nr=u((Xt,ur)=>{function ve(){return e=>{if(e!=null&&e==="")return"CANNOT_BE_EMPTY"}}ur.exports=ve});var lr=u((vt,or)=>{function rt(){return e=>{if(e===void 0||e==="")return"CANNOT_BE_EMPTY";if(!Array.isArray(e))return"FORMAT_ERROR";if(e.length<1)return"CANNOT_BE_EMPTY"}}or.exports=rt});var cr=u((ri,fr)=>{var ar=o();function et(){return e=>{if(!ar.isNoValue(e)&&!ar.isObject(e))return"FORMAT_ERROR"}}fr.exports=et});var hr=u((ei,mr)=>{var pr=o();function tt(){return(e,r,t)=>{if(!pr.isNoValue(e)){if(!pr.isPrimitiveValue(e))return"FORMAT_ERROR";t.push(e+"")}}}mr.exports=tt});var dr=u((ti,Rr)=>{var _r=o();function it(e){return(r,t,i)=>{if(!_r.isNoValue(r)){if(!_r.isPrimitiveValue(r))return"FORMAT_ERROR";if(r+""==e+""){i.push(e);return}return"NOT_ALLOWED_VALUE"}}}Rr.exports=it});var Er=u((ii,gr)=>{var Or=o();function st(e){return Array.isArray(e)||(e=Array.prototype.slice.call(arguments),e.pop()),(r,t,i)=>{if(!Or.isNoValue(r)){if(!Or.isPrimitiveValue(r))return"FORMAT_ERROR";for(let s of e)if(r+""==s+""){i.push(s);return}return"NOT_ALLOWED_VALUE"}}}gr.exports=st});var Ar=u((si,Tr)=>{var qr=o();function ut(e){return(r,t,i)=>{if(!qr.isNoValue(r)){if(!qr.isPrimitiveValue(r))return"FORMAT_ERROR";if(r+="",r.length>e)return"TOO_LONG";i.push(r)}}}Tr.exports=ut});var br=u((ui,Vr)=>{var Nr=o();function nt(e){return(r,t,i)=>{if(!Nr.isNoValue(r)){if(!Nr.isPrimitiveValue(r))return"FORMAT_ERROR";if(r+="",r.length<e)return"TOO_SHORT";i.push(r)}}}Vr.exports=nt});var Mr=u((ni,xr)=>{var yr=o();function ot(e){return(r,t,i)=>{if(!yr.isNoValue(r)){if(!yr.isPrimitiveValue(r))return"FORMAT_ERROR";if(r+="",r.length<e)return"TOO_SHORT";if(r.length>e)return"TOO_LONG";i.push(r)}}}xr.exports=ot});var Pr=u((oi,Lr)=>{var Fr=o();function lt(e,r){return(t,i,s)=>{if(!Fr.isNoValue(t)){if(!Fr.isPrimitiveValue(t))return"FORMAT_ERROR";if(t+="",t.length<e)return"TOO_SHORT";if(t.length>r)return"TOO_LONG";s.push(t)}}}Lr.exports=lt});var kr=u((li,Ir)=>{var wr=o();function at(e,r){let t=arguments.length===3&&r.match("i"),i=new RegExp(e,t?"i":"");return(s,a,l)=>{if(!wr.isNoValue(s)){if(!wr.isPrimitiveValue(s))return"FORMAT_ERROR";if(s+="",!s.match(i))return"WRONG_FORMAT";l.push(s)}}}Ir.exports=at});var jr=u((ai,Dr)=>{var z=o();function ft(){return(e,r,t)=>{if(!z.isNoValue(e)){if(!z.isPrimitiveValue(e))return"FORMAT_ERROR";if(!z.looksLikeNumber(e)||!Number.isInteger(+e))return"NOT_INTEGER";t.push(+e)}}}Dr.exports=ft});var Cr=u((fi,Sr)=>{var H=o();function ct(){return(e,r,t)=>{if(!H.isNoValue(e)){if(!H.isPrimitiveValue(e))return"FORMAT_ERROR";if(!H.looksLikeNumber(e)||!Number.isInteger(+e)||+e<1)return"NOT_POSITIVE_INTEGER";t.push(+e)}}}Sr.exports=ct});var Br=u((ci,Gr)=>{var Y=o();function pt(){return(e,r,t)=>{if(!Y.isNoValue(e)){if(!Y.isPrimitiveValue(e))return"FORMAT_ERROR";if(!Y.looksLikeNumber(e)||(e+="",!/^(?:\-?(?:(?:[0-9]+\.[0-9]+)|(?:[0-9]+)))$/.test(e)))return"NOT_DECIMAL";t.push(+e)}}}Gr.exports=pt});var Wr=u((pi,Ur)=>{var Q=o();function mt(){return(e,r,t)=>{if(!Q.isNoValue(e)){if(!Q.isPrimitiveValue(e))return"FORMAT_ERROR";if(!Q.looksLikeNumber(e)||Number.isNaN(+e)||+e<=0)return"NOT_POSITIVE_DECIMAL";t.push(+e)}}}Ur.exports=mt});var zr=u((mi,$r)=>{var Z=o();function ht(e){return(r,t,i)=>{if(!Z.isNoValue(r)){if(!Z.isPrimitiveValue(r))return"FORMAT_ERROR";if(!Z.looksLikeNumber(r))return"NOT_NUMBER";if(+r>+e)return"TOO_HIGH";i.push(+r)}}}$r.exports=ht});var Yr=u((hi,Hr)=>{var K=o();function _t(e){return(r,t,i)=>{if(!K.isNoValue(r)){if(!K.isPrimitiveValue(r))return"FORMAT_ERROR";if(!K.looksLikeNumber(r))return"NOT_NUMBER";if(+r<+e)return"TOO_LOW";i.push(+r)}}}Hr.exports=_t});var Zr=u((_i,Qr)=>{var J=o();function Rt(e,r){return(t,i,s)=>{if(!J.isNoValue(t)){if(!J.isPrimitiveValue(t))return"FORMAT_ERROR";if(!J.looksLikeNumber(t))return"NOT_NUMBER";if(+t<+e)return"TOO_LOW";if(+t>+r)return"TOO_HIGH";s.push(+t)}}}Qr.exports=Rt});var Xr=u((Ri,Jr)=>{var Kr=o();function dt(){var e=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return r=>{if(!Kr.isNoValue(r)){if(!Kr.isPrimitiveValue(r))return"FORMAT_ERROR";if(r+="",!e.test(r)||/\@.*\@/.test(r)||/\@.*_/.test(r))return"WRONG_EMAIL"}}}Jr.exports=dt});var ee=u((di,re)=>{var vr=o();function Ot(e){return(r,t)=>{if(!vr.isNoValue(r)){if(!vr.isPrimitiveValue(r))return"FORMAT_ERROR";if(r!=t[e])return"FIELDS_NOT_EQUAL"}}}re.exports=Ot});var se=u((Oi,ie)=>{var te=o();function gt(){let e="^(?:(?:http|https)://)(?:\\S+(?::\\S*)?@)?(?:(?:(?:[1-9]\\d?|1\\d\\d|2[0-1]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[0-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))\\.?|localhost)(?::\\d{2,5})?(?:[/?#]\\S*)?$",r=new RegExp(e,"i");return t=>{if(!te.isNoValue(t)){if(!te.isPrimitiveValue(t))return"FORMAT_ERROR";if(!(t.length<2083&&r.test(t)))return"WRONG_URL"}}}ie.exports=gt});var oe=u((gi,ne)=>{var ue=o();function Et(){return e=>{if(ue.isNoValue(e))return;if(!ue.isPrimitiveValue(e))return"FORMAT_ERROR";let r=e.match(/^(\d{4})-([0-1][0-9])-([0-3][0-9])$/);if(r){let t=Date.parse(e);if(!t&&t!==0)return"WRONG_DATE";let i=new Date(t);if(i.setTime(i.getTime()+i.getTimezoneOffset()*60*1e3),i.getFullYear()==r[1]&&i.getMonth()+1==+r[2]&&i.getDate()==+r[3])return}return"WRONG_DATE"}}ne.exports=Et});var fe=u((Ei,ae)=>{var qt=d(),le=o();function Tt(e,r){let t=new qt(e).registerRules(r).prepare();return(i,s,a)=>{if(le.isNoValue(i))return;if(!le.isObject(i))return"FORMAT_ERROR";let l=t.validate(i);if(l){a.push(l);return}else return t.getErrors()}}ae.exports=Tt});var me=u((qi,pe)=>{var At=d(),ce=o();function Nt(e,r,t){let i={};for(let s in r){let a=new At(r[s]).registerRules(t).prepare();i[s]=a}return(s,a,l)=>{if(ce.isNoValue(s))return;if(!ce.isObject(s)||!s[e]||!i[s[e]])return"FORMAT_ERROR";let f=i[s[e]],c=f.validate(s);if(c){l.push(c);return}else return f.getErrors()}}pe.exports=Nt});var _e=u((Ti,he)=>{var Vt=d(),bt=o();function yt(e,r){Array.isArray(e)||(e=Array.prototype.slice.call(arguments),r=e.pop());let t={field:e},i=new Vt(t).registerRules(r).prepare();return(s,a,l)=>{if(bt.isNoValue(s))return;if(!Array.isArray(s))return"FORMAT_ERROR";let f=[],c=[],h=!1;for(let _ of s){let V=i.validate({field:_});V?(f.push(V.field),c.push(null)):(h=!0,c.push(i.getErrors().field),f.push(null))}if(h)return c;l.push(f)}}he.exports=yt});var de=u((Ai,Re)=>{var xt=d(),Mt=o();function Ft(e,r){let t=new xt(e).registerRules(r).prepare();return(i,s,a)=>{if(Mt.isNoValue(i))return;if(!Array.isArray(i))return"FORMAT_ERROR";let l=[],f=[],c=!1;for(let h of i){let _=t.validate(h);_?(l.push(_),f.push(null)):(c=!0,f.push(t.getErrors()),l.push(null))}if(c)return f;a.push(l)}}Re.exports=Ft});var ge=u((Ni,Oe)=>{var Lt=d();function Pt(){let e=Array.prototype.slice.call(arguments),r=e.pop(),t=e.map(i=>{let s={field:i};return new Lt(s).registerRules(r).prepare()});return(i,s,a)=>{let l;for(let f of t){let c=f.validate({field:i});if(c){a.push(c.field);return}else l=f.getErrors().field}return l}}Oe.exports=Pt});var qe=u((Vi,Ee)=>{var wt=d(),It=o();function kt(e,r,t){let i={};for(let s in r){let a=new wt(r[s]).registerRules(t).prepare();i[s]=a}return(s,a,l)=>{if(It.isNoValue(s))return;if(!Array.isArray(s))return"FORMAT_ERROR";let f=[],c=[],h=!1;for(let _ of s){if(typeof _!="object"||!_[e]||!i[_[e]]){c.push("FORMAT_ERROR");continue}let V=i[_[e]],X=V.validate(_);X?(f.push(X),c.push(null)):(h=!0,c.push(V.getErrors()),f.push(null))}if(h)return c;l.push(f)}}Ee.exports=kt});var Ae=u((bi,Te)=>{var Dt=o();Te.exports=e=>(r,t,i)=>{Dt.isNoValue(r)&&i.push(e)}});var Ve=u((yi,Ne)=>{var jt=o();function St(){return(e,r,t)=>{jt.isNoValue(e)||typeof e=="object"||(e+="",t.push(e.replace(/^\s*/,"").replace(/\s*$/,"")))}}Ne.exports=St});var ye=u((xi,be)=>{var Ct=o();function Gt(){return(e,r,t)=>{Ct.isNoValue(e)||typeof e=="object"||(e+="",t.push(e.toLowerCase()))}}be.exports=Gt});var Me=u((Mi,xe)=>{var Bt=o();function Ut(){return(e,r,t)=>{Bt.isNoValue(e)||typeof e=="object"||(e+="",t.push(e.toUpperCase()))}}xe.exports=Ut});var Pe=u((Fi,Le)=>{var Fe=o();function Wt(e){e=Fe.escapeRegExp(e);let r=new RegExp("["+e+"]","g");return(t,i,s)=>{Fe.isNoValue(t)||typeof t=="object"||(t+="",s.push(t.replace(r,"")))}}Le.exports=Wt});var ke=u((Li,Ie)=>{var we=o();function $t(e){e=we.escapeRegExp(e);let r=new RegExp("[^"+e+"]","g");return(t,i,s)=>{we.isNoValue(t)||typeof t=="object"||(t+="",s.push(t.replace(r,"")))}}Ie.exports=$t});var Ce=u((Pi,Se)=>{var De=d(),zt=o(),je={required:sr(),not_empty:nr(),not_empty_list:lr(),any_object:cr(),string:hr(),eq:dr(),one_of:Er(),max_length:Ar(),min_length:br(),length_equal:Mr(),length_between:Pr(),like:kr(),integer:jr(),positive_integer:Cr(),decimal:Br(),positive_decimal:Wr(),max_number:zr(),min_number:Yr(),number_between:Zr(),email:Xr(),equal_to_field:ee(),url:se(),iso_date:oe(),nested_object:fe(),variable_object:me(),list_of:_e(),list_of_objects:de(),or:ge(),list_of_different_objects:qe(),default:Ae(),trim:Ve(),to_lc:ye(),to_uc:Me(),remove:Pe(),leave_only:ke()};De.registerDefaultRules(je);Se.exports={Validator:De,rules:je,util:zt}});var Ge=Ke(Ce()),g,R,b,E,C,y,A,O,x,M,N,q,T,F,L,G,B,U,W,P,$,S=class{constructor(r,{errorMessages:t={},errorClass:i="formurai-error",successClass:s="formurai-success",wrapperClass:a="formurai-container",errorMessageClass:l="formurai-message",withWrapper:f=!0,autoTrim:c=!0,vibrate:h=!0}={}){p(this,g,void 0);p(this,R,void 0);p(this,b,void 0);p(this,E,void 0);p(this,C,void 0);p(this,y,void 0);p(this,A,void 0);p(this,O,void 0);p(this,x,void 0);p(this,M,void 0);p(this,N,void 0);p(this,q,void 0);p(this,T,void 0);I(this,"init",r=>{m(this,g,new Ge.default.Validator(r)),m(this,q,Object.keys(r)),n(this,R).addEventListener("submit",n(this,F))});I(this,"destroy",()=>{m(this,g,null),m(this,q,[]),n(this,R).removeEventListener("submit",n(this,F))});I(this,"checkForm",()=>{let r=this.formData;n(this,g).validate(r)?(m(this,T,{}),m(this,E,!0),n(this,L).call(this)):(m(this,T,n(this,g).getErrors()),m(this,E,!1),n(this,B).call(this),n(this,U).call(this))});p(this,F,r=>{r.preventDefault(),this.checkForm(),this.isFormValid?n(this,R).submit():n(this,$).call(this)});p(this,L,()=>{document.querySelectorAll(`.${n(this,O)}`).forEach(t=>t.classList.remove(n(this,O)))});p(this,G,r=>{r&&(r.classList.remove(n(this,A)),r.classList.add(n(this,O)))});p(this,B,()=>{n(this,L).call(this);let r=Object.keys(this.errors);r.length&&r.forEach(t=>{let i=n(this,R).querySelector(`[name="${t}"]`),s=n(this,P).call(this,i);n(this,G).call(this,s),n(this,W).call(this,s,t)})});p(this,U,()=>{n(this,q).forEach(r=>{let t=n(this,R).querySelector(`[name="${r}"]`),i=n(this,P).call(this,t);i.classList.contains(n(this,O))||i.classList.add(n(this,A))})});p(this,W,(r,t)=>{var l,f;let i=this.errors[t],s=(f=(l=n(this,b))==null?void 0:l[t])==null?void 0:f[i],a=r==null?void 0:r.querySelector(`.${n(this,M)}`);i&&s&&r&&n(this,N)&&(a.innerText=s)});p(this,P,r=>n(this,N)?r.closest(`.${n(this,x)}`):r);p(this,$,()=>{window.navigator.vibrate&&n(this,y)&&window.navigator.vibrate([300,100,300])});m(this,R,r),m(this,C,c),m(this,y,h),m(this,b,t),m(this,A,s),m(this,O,i),m(this,x,a),m(this,M,l),m(this,N,f),m(this,T,{}),m(this,q,[]),m(this,E,!1)}get formData(){let r=new FormData(n(this,R)),t={};return r.forEach((i,s)=>{t[s]=i}),t}get errors(){return n(this,T)}get isFormValid(){return n(this,E)}};g=new WeakMap,R=new WeakMap,b=new WeakMap,E=new WeakMap,C=new WeakMap,y=new WeakMap,A=new WeakMap,O=new WeakMap,x=new WeakMap,M=new WeakMap,N=new WeakMap,q=new WeakMap,T=new WeakMap,F=new WeakMap,L=new WeakMap,G=new WeakMap,B=new WeakMap,U=new WeakMap,W=new WeakMap,P=new WeakMap,$=new WeakMap;var Be={text:["required"],code:["required"],email:["required","email"],phone:["required","integer",{length_between:[1,3]}],password:["required","integer",{length_between:[5,7]}],country:["required",{min_length:6}]};var Ht=document.querySelector("#test-form"),Yt=new S(Ht);Yt.init(Be);})();
